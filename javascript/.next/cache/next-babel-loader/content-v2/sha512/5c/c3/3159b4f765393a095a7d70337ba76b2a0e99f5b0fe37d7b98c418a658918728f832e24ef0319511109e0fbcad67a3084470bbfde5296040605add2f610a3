{"ast":null,"code":"import { applyMiddleware, createStore } from 'redux';\nimport { createWrapper } from 'next-redux-wrapper';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport logger from 'redux-logger';\nimport createSagaMiddleware from 'redux-saga';\nimport rootSaga, { rootReducer } from './modules';\n\nconst bindMiddleware = middleware => {\n  if (true) {\n    return composeWithDevTools(applyMiddleware(...middleware, logger));\n  }\n\n  return applyMiddleware(...middleware);\n}; // create a makeStore function\n\n\nconst makeStore = context => {\n  var _localStorage, _localStorage2;\n\n  // 1: Create the middleware\n  const sagaMiddleware = createSagaMiddleware();\n  const KEYNAME = 'NEXT-RED-EMO-MAT-STATE'; // if KEYNAME exists in LocalStorage, load it\n\n  const preloadedState = false && (_localStorage = localStorage) !== null && _localStorage !== void 0 && _localStorage.getItem(KEYNAME) ? JSON.parse((_localStorage2 = localStorage) === null || _localStorage2 === void 0 ? void 0 : _localStorage2.getItem(KEYNAME)) : {}; // 2: Add an extra parameter for applying middleware:\n\n  const store = createStore(rootReducer, preloadedState, bindMiddleware([sagaMiddleware])); // 3: Run sagas on server\n\n  store.sagaTask = sagaMiddleware.run(rootSaga); // optional: subscribe to store events\n\n  store.subscribe(() => {\n    var _localStorage3;\n\n    return (_localStorage3 = localStorage) === null || _localStorage3 === void 0 ? void 0 : _localStorage3.setItem(KEYNAME, JSON.stringify(store.getState()));\n  });\n  return store;\n}; // export an assembled wrapper\n\n\nexport const wrapper = createWrapper(makeStore, {\n  debug: true\n});","map":{"version":3,"sources":["/home/sung/dev/next-red-emo/src/lib/redux/store.js"],"names":["applyMiddleware","createStore","createWrapper","composeWithDevTools","logger","createSagaMiddleware","rootSaga","rootReducer","bindMiddleware","middleware","makeStore","context","sagaMiddleware","KEYNAME","preloadedState","localStorage","getItem","JSON","parse","store","sagaTask","run","subscribe","setItem","stringify","getState","wrapper","debug"],"mappings":"AAAA,SAASA,eAAT,EAA0BC,WAA1B,QAA6C,OAA7C;AACA,SAASC,aAAT,QAA+B,oBAA/B;AACA,SAASC,mBAAT,QAAoC,0BAApC;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAOC,oBAAP,MAAiC,YAAjC;AACA,OAAOC,QAAP,IAAmBC,WAAnB,QAAsC,WAAtC;;AAEA,MAAMC,cAAc,GAAIC,UAAD,IAAgB;AACtC,YAA2C;AAC1C,WAAON,mBAAmB,CAACH,eAAe,CAAC,GAAGS,UAAJ,EAAgBL,MAAhB,CAAhB,CAA1B;AACA;;AACD,SAAOJ,eAAe,CAAC,GAAGS,UAAJ,CAAtB;AACA,CALD,C,CAOA;;;AACA,MAAMC,SAAS,GAAIC,OAAD,IAAa;AAAA;;AAC9B;AACA,QAAMC,cAAc,GAAGP,oBAAoB,EAA3C;AAEA,QAAMQ,OAAO,GAAG,wBAAhB,CAJ8B,CAM9B;;AACA,QAAMC,cAAc,GACnB,0BAAiCC,YAAjC,0CAAiC,cAAcC,OAAd,CAAsBH,OAAtB,CAAjC,GACGI,IAAI,CAACC,KAAL,mBAAWH,YAAX,mDAAW,eAAcC,OAAd,CAAsBH,OAAtB,CAAX,CADH,GAEG,EAHJ,CAP8B,CAY9B;;AACA,QAAMM,KAAK,GAAGlB,WAAW,CACxBM,WADwB,EAExBO,cAFwB,EAGxBN,cAAc,CAAC,CAACI,cAAD,CAAD,CAHU,CAAzB,CAb8B,CAmB9B;;AACAO,EAAAA,KAAK,CAACC,QAAN,GAAiBR,cAAc,CAACS,GAAf,CAAmBf,QAAnB,CAAjB,CApB8B,CAsB9B;;AACAa,EAAAA,KAAK,CAACG,SAAN,CAAgB;AAAA;;AAAA,6BACfP,YADe,mDACf,eAAcQ,OAAd,CAAsBV,OAAtB,EAA+BI,IAAI,CAACO,SAAL,CAAeL,KAAK,CAACM,QAAN,EAAf,CAA/B,CADe;AAAA,GAAhB;AAIA,SAAON,KAAP;AACA,CA5BD,C,CA8BA;;;AACA,OAAO,MAAMO,OAAO,GAAGxB,aAAa,CAACQ,SAAD,EAAY;AAAEiB,EAAAA,KAAK,EAAE;AAAT,CAAZ,CAA7B","sourcesContent":["import { applyMiddleware, createStore } from 'redux';\nimport { createWrapper  } from 'next-redux-wrapper';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport logger from 'redux-logger';\nimport createSagaMiddleware from 'redux-saga';\nimport rootSaga, { rootReducer } from './modules';\n\nconst bindMiddleware = (middleware) => {\n\tif (process.env.NODE_ENV !== 'production') {\n\t\treturn composeWithDevTools(applyMiddleware(...middleware, logger));\n\t}\n\treturn applyMiddleware(...middleware);\n};\n\n// create a makeStore function\nconst makeStore = (context) => {\n\t// 1: Create the middleware\n\tconst sagaMiddleware = createSagaMiddleware();\n\n\tconst KEYNAME = 'NEXT-RED-EMO-MAT-STATE';\n\n\t// if KEYNAME exists in LocalStorage, load it\n\tconst preloadedState =\n\t\ttypeof window !== 'undefined' && localStorage?.getItem(KEYNAME)\n\t\t\t? JSON.parse(localStorage?.getItem(KEYNAME))\n\t\t\t: {};\n\n\t// 2: Add an extra parameter for applying middleware:\n\tconst store = createStore(\n\t\trootReducer,\n\t\tpreloadedState,\n\t\tbindMiddleware([sagaMiddleware])\n\t);\n\n\t// 3: Run sagas on server\n\tstore.sagaTask = sagaMiddleware.run(rootSaga);\n\n\t// optional: subscribe to store events\n\tstore.subscribe(() =>\n\t\tlocalStorage?.setItem(KEYNAME, JSON.stringify(store.getState()))\n\t);\n\n\treturn store;\n};\n\n// export an assembled wrapper\nexport const wrapper = createWrapper(makeStore, { debug: true });\n"]},"metadata":{},"sourceType":"module"}